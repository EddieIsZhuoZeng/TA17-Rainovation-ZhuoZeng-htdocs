google.charts.load("current",{packages:["corechart","bar","gauge","scatter"]});var wpDataTablesGoogleChart=function(){var t={rows:[],columns:[],type:"column",containerId:"google-chart-container",columnIndexes:[],connectedWPDataTable:null,chart:null,googleDataTable:null,renderCallback:null,options:{animation:"none",backgroundColor:{fill:"#FFFFFF",strokeWidth:0,stroke:"#666",rx:0},chartArea:{backgroundColor:{}},crosshair:{},height:400,legend:{position:"right"},orientation:"horizontal",titlePosition:"out",tooltip:{trigger:"none"},vAxis:{direction:1,viewWindow:{}}},setRows:function(t){this.rows=t},enableDateTimeAxis:function(){this.options.hAxis.gridlines={count:-1,units:{days:{format:["MMM dd"]},hours:{format:["HH:mm","ha"]}}}},detectDates:function(){for(var t in this.columns)if("date"==this.columns[t].type||"datetime"==this.columns[t].type)for(var o in this.rows){var e=Date.parse(this.rows[o][t]);if(isNaN(e))this.rows[o][t]=new Date;else if(this.rows[o][t]=new Date(e),null==this.connectedWPDataTable){var i=this.rows[o][t].getTime();"datetime"==this.columns[t].type&&(i+=60*this.rows[o][t].getTimezoneOffset()*1e3),this.rows[o][t].setTime(i)}else this.rows[o][t].setTime(this.rows[o][t].getTime());"datetime"==this.columns[t].type&&this.enableDateTimeAxis()}},setColumns:function(t){this.columns=t},getColumns:function(){return this.columns},setOptions:function(o){for(var e in o)"responsive_width"!=e||"1"!=o[e]?this.options[e]=o[e]:(t.options.animation=!1,jQuery(window).resize(function(){t.chart.draw(t.googleDataTable,t.options)}))},getOptions:function(){return this.options},setType:function(t){this.type=t},getType:function(){return this.type},setContainer:function(t){this.containerId=t},getContainer:function(){return this.containerId},setRenderCallback:function(t){this.renderCallback=t},render:function(){for(var t in this.googleDataTable=new google.visualization.DataTable,this.columns)this.googleDataTable.addColumn(this.columns[t]);switch(this.detectDates(),this.googleDataTable.addRows(this.rows),this.type){case"google_column_chart":this.chart=new google.visualization.ColumnChart(document.getElementById(this.containerId));break;case"google_histogram":this.chart=new google.visualization.Histogram(document.getElementById(this.containerId));break;case"google_bar_chart":this.options.orientation="vertical",this.chart=new google.visualization.BarChart(document.getElementById(this.containerId));break;case"google_stacked_bar_chart":this.options.orientation="vertical",this.options.isStacked=!0,this.chart=new google.visualization.BarChart(document.getElementById(this.containerId));break;case"google_area_chart":this.chart=new google.visualization.AreaChart(document.getElementById(this.containerId));break;case"google_stepped_area_chart":this.options.isStacked=!0,this.chart=new google.visualization.SteppedAreaChart(document.getElementById(this.containerId));break;case"google_line_chart":this.chart=new google.visualization.LineChart(document.getElementById(this.containerId));break;case"google_pie_chart":this.chart=new google.visualization.PieChart(document.getElementById(this.containerId));break;case"google_bubble_chart":this.chart=new google.visualization.BubbleChart(document.getElementById(this.containerId));break;case"google_donut_chart":this.options.pieHole=.4,this.chart=new google.visualization.PieChart(document.getElementById(this.containerId));break;case"google_gauge_chart":this.options.redFrom=90,this.options.redTo=100,this.options.yellowFrom=75,this.options.yellowTo=90,this.options.minorTicks=5,this.chart=new google.visualization.Gauge(document.getElementById(this.containerId));break;case"google_scatter_chart":this.chart=new google.visualization.ScatterChart(document.getElementById(this.containerId));break;case"google_candlestick_chart":this.options.legend="none",this.chart=new google.visualization.CandlestickChart(document.getElementById(this.containerId));break;case"google_waterfall_chart":this.options.legend="none",this.options.bar={groupWidth:"100%"},this.options.candlestick={fallingColor:{strokeWidth:0,fill:"#a52714"},risingColor:{strokeWidth:0,fill:"#0f9d58"}},this.chart=new google.visualization.CandlestickChart(document.getElementById(this.containerId))}null!==this.renderCallback&&this.renderCallback(this),this.chart.draw(this.googleDataTable,this.options)},refresh:function(){if(void 0!==google.visualization.DataTable&&null!=this.chart){for(var t in this.googleDataTable=new google.visualization.DataTable,this.columns)this.googleDataTable.addColumn(this.columns[t]);this.detectDates(),this.googleDataTable.addRows(this.rows),null!==this.renderCallback&&this.renderCallback(this),this.chart.draw(this.googleDataTable,this.options)}},setChartConfig:function(t){this.options.width=t.width,t.height&&(this.options.height=t.height),this.options.backgroundColor.fill=t.background_color,t.border_width&&(this.options.backgroundColor.strokeWidth=t.border_width),this.options.backgroundColor.stroke=t.border_color,t.border_radius&&(this.options.backgroundColor.rx=t.border_radius),t.border_radius&&(this.options.backgroundColor.rx=t.border_radius),this.options.chartArea.backgroundColor.fill=t.plot_background_color,t.plot_border_width&&(this.options.chartArea.backgroundColor.strokeWidth=t.plot_border_width),this.options.chartArea.backgroundColor.stroke=t.plot_border_color;var o=0;for(var e in t.series_data)this.columns[o+1].label=t.series_data[e].label,""!=t.series_data[e].color&&(this.options.series[o]={color:t.series_data[e].color}),o++;0==t.show_grid?(this.options.hAxis.gridlines={color:"transparent"},this.options.vAxis.gridlines={color:"transparent"}):(delete this.options.hAxis.gridlines,delete this.options.vAxis.gridlines),t.horizontal_axis_label&&(this.options.hAxis.title=t.horizontal_axis_label),t.vertical_axis_label&&(this.options.vAxis.title=t.vertical_axis_label),1==t.show_title?this.options.title=t.chart_title:this.options.title="",1==t.title_floating?this.options.titlePosition="in":this.options.titlePosition="out",1==t.tooltip_enabled?this.options.tooltip.trigger="focus":this.options.tooltip.trigger="none",t.legend_position&&(this.options.legend.position=t.legend_position),"bottom"==t.legend_vertical_align?this.options.legend.alignment="end":"middle"==t.legend_vertical_align?this.options.legend.alignment="center":this.options.legend.alignment="start"},setColumnIndexes:function(t){this.columnIndexes=t},getColumnIndexes:function(){return this.columnIndexes}};return t};